<% layout('layouts/boilerplate.ejs') %>

    <div class="col-md-10 offset-md-1">
        <h1>
            <%= library.name %>
        </h1>
        <div>
            <div id="map" style="width: 100%; height: 300px"></div>

        </div>



        <!-- study spot cards -->
        <% if (library.studySpots.length) { %>
            <h2>study spots</h2>
            <% for (let s of library.studySpots){ %>
                <div class="card" mb-3>
                    <div class="row">
                        <div class="col-md-4">
                            <img class="img-fluid" alt="" src="<%=s.image.imageUrl%>">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <p class="card-text">
                                    <%= s.description %>
                                </p>
                                <p class="card-text">
                                    <small class="text-muted">
                                        found in <%= library.name %>
                                    </small>
                                </p>
                                <a class="btn btn-primary" href="/studySpots/<%=s._id%>">Details
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <% } %>
                    <% } else { %>
                        <div class="mb-3">
                            <h3>wow such empty...</h3>
                            <div>no one added a study spot to this library</div>
                        </div>

                        <% } %>




                            <!-- back button -->
                            <div class="mt-2 mb-3"> <a class="btn btn-primary" href="/libraries">Back to all
                                    libraries</a>
                                <a class="btn btn-primary" href="/studySpots">See all study spots on campus</a>
                            </div>

    </div>

    <script>
        mapboxgl.accessToken = '<%- process.env.MAPBOX_TOKEN %>'
        const libraryCoordinates = '<%- library.location.coordinates %>'.split(',')
    </script>
    <script src="/mapbox.js"></script>